<ion-app>
    <ion-header class="ion-no-border ion-padding">
      <ion-grid>
  
        <ion-row size="12">
          <ion-col size="3">
            <div>
              <!-- <p (click)="return()" class="ion-align-items-start return">
                < REGRESAR</p> -->
                <ion-button (click)="return()" shape="round" color="warning" expand="full" size="small">
                  REGRESAR
                </ion-button>
            </div>
          </ion-col>
          <ion-col size="9"></ion-col>
        </ion-row>
        <br>
        
        <ion-row size="12">
          <ion-col size="1">
            <img src="./assets/icon/ilustracion_mesas_en_espera.png" alt="Espectativa de venta" />
          </ion-col>
          
          <ion-col size="11" class="ion-align-self-center">
            
            <h3 class="title">25 PUNTOS</h3>
          </ion-col>
        </ion-row>
        <!-- titulo de empresa -->
        <ion-row size="12" *ngIf="user" >
          <ion-col size="9">
            <h5 class="subtitle-negro">{{user.branchName}}</h5>
          </ion-col>
          <ion-col size="3">
            <span class="date-grey">
              {{ today | date: "dd/MM/yyy" }}
            </span>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-header>
    <ion-content fullscreen="false" class="ion-padding">
      <ion-grid>
        <ion-row size="12" *ngIf="user" >
        <ion-col size="4">
          <ion-list>
            <ion-accordion-group>
              <ion-accordion value="end" >
                <ion-item slot="header">
                  <ion-label>FECHA INICIAL:</ion-label>
                  <ion-note slot="end" id="datetimeValue"></ion-note>
                </ion-item>
                <ion-datetime
                  [(ngModel)]="dateIni"
                  id="datetime"
                  slot="content"
                  display-format="DD/MM/YYYY"
                  min="2023-01-01"
                  max="2050-01-01"
                  value="2023-01-01"
                ></ion-datetime>
              </ion-accordion>
            </ion-accordion-group>
          </ion-list>
        </ion-col>
        <ion-col size="4">
          <ion-list>
            <ion-accordion-group>
              <ion-accordion value="end" >
                <ion-item slot="header">
                  <ion-label>FECHA FINAL:</ion-label>
                  <ion-note slot="end" id="datetimeValue"></ion-note>
                </ion-item>
                <ion-datetime
                  [(ngModel)]="dateFin"
                  id="datetime"
                  slot="content"
                  display-format="DD/MM/YYYY"
                  min="2023-01-01"
                  max="2050-01-01"
                  value="2023-01-01"
                ></ion-datetime>
              </ion-accordion>
            </ion-accordion-group>
          </ion-list>
        </ion-col>
        <ion-col size="2"></ion-col>
        <ion-col size="2">
            <br/>
            <br/>
            <br/>
            <div>
                <ion-button (click)="datos()" shape="round" color="dark" expand="full" size="small">
                  ACEPTAR
                </ion-button>
            </div>
        </ion-col>
        
       </ion-row>
       <br/>

           <!-- total incidencias -->
   <div class="col-lg-3 col-md-6 col-sm-6"  *ngIf="show" style="margin:auto;">
    <div class="card card-stats">
      <div class="card-body ">
        <div class="row">
          <div class="col-12 my-2">
            <div class="text-center">
              <h5>TOTAL DE INCIDENCIAS</h5>
            </div>
          </div>
          <div class="col-12 my-2">
            <div class="text-center">
              <span class="card_porcentage">{{this.incidenciastotal}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br/>

         <div class="chart-container" id="chart-container" style="position: relative; height:auto; width:50%; margin: auto;">
          <canvas id="myChart"></canvas>
         </div>
  
      </ion-grid>

  <br /> 

      <div class="ct"  *ngIf="show">
        <table>
            <thead>
              <tr>
                <th class="tabcol">USUARIO</th>
                <th class="tabcol">FECHA</th>
                <th class="tabcol">MESA</th>
                <th class="tabcol">TOTAL PTS</th>
                <th class="tabcol">COBROS</th>
                <th class="tabcol">COBROS MINIMOS</th>
                <th class="tabcol">DIFERENCIA</th>
                <th class="tabcol">JUSTIFICACION</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of data">
                <td class="tabcol2">
                    <h5>
                        {{ item.usuario }}
                    </h5>
                </td>
                <td class="tabcol2">
                    <h5>{{ item.fechaIni | date:'dd/MM/yyyy' }}</h5>
                </td>
                <td class="tabcol2">
                    <h5>{{item.mesa}}</h5> 
                </td>
                <td class="tabcol2">
                    <h5>{{item.totalAyc}}</h5>
                </td>
                <td class="tabcol2">
                    <h5>{{item.cobros}}</h5>
                </td>
                <td class="tabcol2">
                    <h5>{{item.cobrosMinimos}}</h5>
                </td>
                <td class="tabcol2">
                    <h5> {{item.diferencia}}</h5>
                </td>
                <td class="tabcol2">
                    <h5>{{item.justificacion}}</h5>
                </td>
              </tr>
            </tbody>
          </table>
        
      </div>
    

    </ion-content>
 

  </ion-app>
  
  